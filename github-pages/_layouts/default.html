<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: "en" }}">

  {%- include head.html -%}

  <body>

    {%- include header.html -%}

    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        {{ content }}
      </div>
    </main>

    {%- include footer.html -%}

    <!-- Mermaid.js Support -->
    <script src="{{ site.mermaid.src | default: 'https://cdn.jsdelivr.net/npm/mermaid@9.4.3/dist/mermaid.min.js' }}"></script>
    <script>
      // Initialize Mermaid with healthcare-themed colors
      mermaid.initialize({
        startOnLoad: true,
        theme: 'base',
        themeVariables: {
          primaryColor: '#2c5aa0',
          primaryTextColor: '#ffffff',
          primaryBorderColor: '#1e3a5f',
          lineColor: '#4a90c2',
          sectionBkgColor: '#f8f9fa',
          altSectionBkgColor: '#e9ecef',
          gridColor: '#dee2e6',
          secondaryColor: '#6c757d',
          tertiaryColor: '#adb5bd',
          background: '#ffffff',
          mainBkg: '#ffffff',
          secondBkg: '#f8f9fa',
          tertiaryBkg: '#e9ecef'
        },
        flowchart: {
          htmlLabels: true,
          curve: 'basis'
        },
        sequence: {
          diagramMarginX: 50,
          diagramMarginY: 10,
          actorMargin: 50,
          width: 150,
          height: 65,
          boxMargin: 10,
          boxTextMargin: 5,
          noteMargin: 10,
          messageMargin: 35,
          mirrorActors: true,
          bottomMarginAdj: 1,
          useMaxWidth: true,
          rightAngles: false,
          showSequenceNumbers: false
        },
        gantt: {
          timeFormat: '%Y-%m-%d',
          axisFormat: '%m/%d/%Y'
        }
      });

      // Add custom styling for healthcare diagrams
      document.addEventListener('DOMContentLoaded', function() {
        // Add healthcare-specific classes to Mermaid diagrams
        const mermaidDivs = document.querySelectorAll('.mermaid');
        mermaidDivs.forEach(function(div) {
          div.classList.add('healthcare-diagram');
        });
      });
    </script>

    <!-- Custom CSS for Mermaid diagrams -->
    <style>
      .healthcare-diagram {
        background: #ffffff;
        border-radius: 8px;
        padding: 20px;
        margin: 20px 0;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        overflow-x: auto;
      }

      .healthcare-diagram svg {
        max-width: 100%;
        height: auto;
      }

      /* Healthcare-themed node styling */
      .healthcare-diagram .node rect {
        stroke: #2c5aa0 !important;
        stroke-width: 2px !important;
      }

      .healthcare-diagram .node.supervisor rect {
        fill: #2c5aa0 !important;
      }

      .healthcare-diagram .node.agent rect {
        fill: #4a90c2 !important;
      }

      .healthcare-diagram .node.database rect {
        fill: #28a745 !important;
      }

      .healthcare-diagram .node.security rect {
        fill: #dc3545 !important;
      }

      .healthcare-diagram .node.healthcare rect {
        fill: #fd7e14 !important;
      }

      /* Responsive diagram container */
      @media (max-width: 768px) {
        .healthcare-diagram {
          padding: 10px;
          margin: 10px 0;
        }
      }

      /* Dark mode support */
      @media (prefers-color-scheme: dark) {
        .healthcare-diagram {
          background: #1e1e1e;
          border: 1px solid #333;
        }
      }
    </style>

  </body>

</html> 